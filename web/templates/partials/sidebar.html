{{define "sidebar"}}
<!-- Mobile overlay backdrop -->
<div x-show="sidebarOpen"
     x-transition:enter="transition ease-out duration-200"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition ease-in duration-150"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     class="lg:hidden fixed inset-0 bg-black/50 z-40"
     @click="sidebarOpen = false">
</div>

<aside class="fixed left-0 top-0 h-full w-64 bg-card border-r border-border z-50 flex flex-col transition-transform duration-200"
       :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'">
    <!-- Logo -->
    <div class="px-5 py-4 border-b border-border">
        <a href="/dashboard" class="flex items-center space-x-3">
            <div class="w-8 h-8 bg-accent rounded-lg flex items-center justify-center">
                <i data-lucide="shield-check" class="w-4 h-4 text-white"></i>
            </div>
            <span class="text-base font-semibold text-foreground tracking-tight">WatchDog</span>
        </a>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-3 py-4 space-y-1">
        <a href="/dashboard" class="group flex items-center space-x-3 px-3 py-2 rounded-md text-sm transition-smooth
            {{if eq .Title "Dashboard"}}bg-foreground/[0.08] text-foreground font-medium{{else}}text-muted-foreground hover:text-foreground hover:bg-muted/50{{end}}">
            <i data-lucide="layout-dashboard" class="w-4 h-4"></i>
            <span class="flex-1">Dashboard</span>
            <kbd class="hidden group-hover:inline-block text-[9px] text-muted-foreground/50 font-mono px-1 py-0.5 rounded bg-muted/50">G D</kbd>
        </a>

        <a href="/monitors" class="group flex items-center space-x-3 px-3 py-2 rounded-md text-sm transition-smooth
            {{if eq .Title "Monitors"}}bg-foreground/[0.08] text-foreground font-medium{{else}}text-muted-foreground hover:text-foreground hover:bg-muted/50{{end}}">
            <i data-lucide="activity" class="w-4 h-4"></i>
            <span class="flex-1">Monitors</span>
            <kbd class="hidden group-hover:inline-block text-[9px] text-muted-foreground/50 font-mono px-1 py-0.5 rounded bg-muted/50">G M</kbd>
        </a>

        <a href="/incidents" class="group flex items-center space-x-3 px-3 py-2 rounded-md text-sm transition-smooth
            {{if eq .Title "Incidents"}}bg-foreground/[0.08] text-foreground font-medium{{else}}text-muted-foreground hover:text-foreground hover:bg-muted/50{{end}}">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            <span class="flex-1">Incidents</span>
            {{if and .Stats .Stats.ActiveIncidents}}
            {{if gt .Stats.ActiveIncidents 0}}
            <span class="ml-auto bg-destructive/20 text-destructive text-xs px-1.5 py-0.5 rounded-md font-medium">
                {{.Stats.ActiveIncidents}}
            </span>
            {{end}}
            {{end}}
            <kbd class="hidden group-hover:inline-block text-[9px] text-muted-foreground/50 font-mono px-1 py-0.5 rounded bg-muted/50">G I</kbd>
        </a>

        {{if .IsAdmin}}
        <div class="pt-4 mt-2 border-t border-border/50"></div>
        <a href="/admin" class="group flex items-center space-x-3 px-3 py-2 rounded-md text-sm transition-smooth
            {{if eq .Title "Admin"}}bg-foreground/[0.08] text-foreground font-medium{{else}}text-muted-foreground hover:text-foreground hover:bg-muted/50{{end}}">
            <i data-lucide="shield" class="w-4 h-4"></i>
            <span>Admin</span>
        </a>
        {{end}}
    </nav>

    <!-- Footer -->
    <div class="px-4 py-3 border-t border-border">
        {{if .Plan}}
        <div class="flex items-center justify-between">
            <span class="text-xs text-muted-foreground">Plan</span>
            <span class="text-xs px-2 py-0.5 rounded-md font-medium
                {{if eq .Plan "Pro"}}bg-blue-500/15 text-blue-400
                {{else if eq .Plan "Team"}}bg-purple-500/15 text-purple-400
                {{else}}bg-muted text-muted-foreground{{end}}">
                {{.Plan}}
            </span>
        </div>
        {{end}}
        <div class="text-xs text-muted-foreground/50 mt-1">
            WatchDog v1.0.0
        </div>
    </div>
</aside>
{{end}}
