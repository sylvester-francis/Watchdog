@tailwind base;
@tailwind components;
@tailwind utilities;

/* Pulse dot animation (subtler) */
@keyframes pulse-dot {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}
.animate-pulse-dot {
    animation: pulse-dot 2s ease-in-out infinite;
}

/* HTMX NProgress-style loading bar */
@keyframes htmx-progress {
    0% { width: 0%; }
    20% { width: 30%; }
    50% { width: 60%; }
    80% { width: 80%; }
    100% { width: 95%; }
}
@keyframes htmx-progress-finish {
    from { width: 95%; opacity: 1; }
    to { width: 100%; opacity: 0; }
}
#htmx-progress {
    position: fixed;
    top: 0;
    left: 0;
    height: 2px;
    background: #3b82f6;
    z-index: 9999;
    opacity: 0;
    width: 0%;
    transition: opacity 0.2s;
    pointer-events: none;
}
#htmx-progress.active {
    opacity: 1;
    animation: htmx-progress 8s ease-out forwards;
}
#htmx-progress.done {
    animation: htmx-progress-finish 0.3s ease-out forwards;
}

/* Modal transitions */
@keyframes modal-enter {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}
@keyframes modal-leave {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(0.95); }
}
.modal-enter {
    animation: modal-enter 150ms ease-out;
}
.modal-leave {
    animation: modal-leave 100ms ease-in forwards;
}

/* Row highlight flash for SSE updates */
@keyframes highlight-flash {
    0% { box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.5); }
    100% { box-shadow: inset 0 0 0 1px transparent; }
}
.highlight-flash {
    animation: highlight-flash 1s ease-out;
}

/* Focus visible ring utility */
.focus-visible-ring:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px #09090b, 0 0 0 4px #3b82f6;
}

/* Smooth transitions */
.transition-smooth {
    transition: all 0.15s ease-in-out;
}

/* Toast animations */
@keyframes slide-in {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
@keyframes slide-out {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}
.toast-enter { animation: slide-in 0.3s ease-out; }
.toast-exit { animation: slide-out 0.3s ease-in forwards; }

/* Fade-in-up for page elements */
@keyframes fade-in-up {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in-up {
    animation: fade-in-up 0.5s ease-out both;
}
.stagger-1 { animation-delay: 0.05s; }
.stagger-2 { animation-delay: 0.1s; }
.stagger-3 { animation-delay: 0.15s; }
.stagger-4 { animation-delay: 0.2s; }

/* Skeleton shimmer */
@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}
.skeleton {
    background: linear-gradient(90deg, #27272a 25%, #3f3f46 50%, #27272a 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 0.25rem;
}

/* Scroll reveal */
.reveal {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
.reveal.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Slide-in from right (for panels) */
@keyframes slide-in-right {
    from { transform: translateX(100%); }
    to { transform: translateX(0); }
}
.animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out;
}

/* Toast progress bar */
@keyframes toast-progress {
    from { width: 100%; }
    to { width: 0%; }
}
.toast-progress {
    animation: toast-progress 4s linear forwards;
}

/* Hide Alpine-controlled elements until Alpine initializes */
[x-cloak] { display: none !important; }

/* Scrollbar styling */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: #09090b; }
::-webkit-scrollbar-thumb { background: #27272a; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #3f3f46; }

/* Landing page card hover */
.card-hover { transition: border-color 0.2s ease; }
.card-hover:hover { border-color: #3f3f46; }

/* Landing page bar chart animation */
@keyframes bar-grow {
    from { height: 10%; }
}
.bar-animate {
    animation: bar-grow 1s ease-out both;
}

/* Auth page pulse animation */
@keyframes pulse-slow {
    0%, 100% { opacity: 0.4; }
    50% { opacity: 0.7; }
}
.animate-pulse-slow {
    animation: pulse-slow 4s ease-in-out infinite;
}

/* Sidebar hover transition */
.sidebar-link {
    transition: background-color 150ms ease, color 150ms ease;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    .animate-pulse-dot,
    .animate-pulse-slow,
    .animate-fade-in-up,
    .animate-slide-in-right,
    .toast-enter,
    .toast-exit,
    .modal-enter,
    .modal-leave,
    .highlight-flash,
    .bar-animate,
    .skeleton {
        animation: none !important;
    }
    .transition-smooth,
    .sidebar-link,
    .card-hover {
        transition: none !important;
    }
    #htmx-progress {
        display: none !important;
    }
}
